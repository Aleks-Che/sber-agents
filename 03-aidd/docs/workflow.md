# Workflow разработки кулинарного помощника

Документ описывает правила выполнения работ по тасклисту [`tasklist.md`](./tasklist.md) для кодового ассистента.  
Цель — обеспечить итеративную, предсказуемую разработку бота в соответствии с [`vision.md`](./vision.md).

## 1. Общие принципы

- **Итеративность** — работа ведётся строго по плану итераций из `tasklist.md`. Не перескакивать на следующие итерации, пока текущая не завершена.
- **KISS** — каждое решение должно быть максимально простым. Избегай излишних абстракций и функциональности «на будущее».
- **Согласование** — перед реализацией любого нетривиального изменения согласуй предполагаемое решение с отрезками кода (покажи код, который планируешь изменить/добавить).
- **Подтверждение** — после реализации ожидай подтверждения от пользователя (или автоматического теста), что изменение работает корректно.
- **Прогресс** — после каждого завершённого шага обновляй статус в `tasklist.md` (галочки в задачах, статус итерации).
- **Коммиты** — по завершении итерации делай атомарный коммит в репозиторий с понятным сообщением (например, `feat: завершена итерация 2 — интеграция с LLM`).

## 2. Цикл работы над итерацией

Для каждой итерации из `tasklist.md`:

1. **Анализ** — изучи описание итерации, определи, какие файлы нужно изменить/создать.
2. **Согласование** — покажи пользователю предполагаемые изменения (например, дифф или фрагмент кода) и получи согласие.
3. **Реализация** — внеси изменения в код, соблюдая правила из [`conventions.md`](./conventions.md).
4. **Тестирование** — запусти бота локально, проверь, что новая функциональность работает как ожидается.
5. **Подтверждение** — дождись подтверждения от пользователя, что всё работает.
6. **Обновление прогресса** — отметь выполнение в `tasklist.md` (поставь галочки в задачах, обнови статус итерации).
7. **Коммит** — закоммить изменения с ясным сообщением.
8. **Переход к следующей итерации** — только после подтверждения пользователя.

## 3. Роли и ответственности

- **Кодовый ассистент** — выполняет техническую реализацию, следует правилам KISS и YAGNI, обеспечивает качество кода (типизация, обработка ошибок, логирование).
- **Пользователь/ревьюер** — предоставляет требования, согласовывает решения, подтверждает корректность, обновляет бизнес-логику документов.

## 4. Документы‑основания

- [`idea.md`](./idea.md) — общая идея продукта.
- [`vision.md`](./vision.md) — техническое видение, архитектура, системный промпт, конфигурация.
- [`conventions.md`](./conventions.md) — правила написания кода.
- [`tasklist.md`](./tasklist.md) — пошаговый план итераций, таблица прогресса.

## 5. Частые ситуации

### 5.1. Обнаружена ошибка в предыдущей итерации

Если в процессе работы найдена ошибка в уже завершённой итерации:

- Немедленно исправь её.
- Обнови `tasklist.md`, если ошибка критична для прогресса.
- Сделай коммит с сообщением `fix: описание ошибки`.

### 5.2. Требуется изменение vision.md или conventions.md

Если в ходе реализации выяснилось, что правила или архитектура нуждаются в корректировке:

- Останови реализацию.
- Предложи изменение в соответствующем документе.
- После согласования внеси правку в документ и только потом продолжай код.

### 5.3. Итерация требует дополнительных задач

Если в рамках итерации возникли непредусмотренные подзадачи:

- Добавь их в список задач текущей итерации (в `tasklist.md`).
- Продолжай выполнение после согласования.

## 6. Контрольные точки

Перед переходом к следующей итерации убедись, что:

- Все задачи текущей итерации отмечены как выполненные.
- Код проходит линтинг (если настроен) и не содержит очевидных ошибок.
- Бот запускается локально и выполняет новую функциональность.
- Документация (комментарии, `README`) при необходимости обновлена.

---

_Workflow создан для обеспечения дисциплины разработки.  
Дата создания: 2025‑12‑06_
